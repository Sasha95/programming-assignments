\documentclass[10pt, russian]{article}

\usepackage{lipsum} % DELME

\sloppy

%%% Константы %%%
\newcommand{\Author}{В.~И.~Великодный}
\newcommand{\AuthorI}{Великодный~В.~И.}
\newcommand{\Title}{Задачи по программированию}
\newcommand{\PubType}{Учебное пособие}
\newcommand{\Year}{2017}

\newcommand{\UDC}{???} % УДК
\newcommand{\BBK}{???} % ББК
\newcommand{\AS}{З??}  % Авторский знак

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Математические окружения %%%
\usepackage{amsmath}

%%% Математические шрифты %%%
\usepackage{mathspec}
\usepackage[charter]{mathdesign}

%%% Специальные символы %%%
\usepackage{gensymb}

%%% Шрифты документа %%%
\usepackage{fontspec}

\defaultfontfeatures{Scale=MatchLowercase,Mapping=tex-text}
\setmainfont[Path = ../fonts/,
	BoldFont = CharisSIL-B.ttf,
  	ItalicFont = CharisSIL-I.ttf,
  	BoldItalicFont = CharisSIL-BI.ttf]
  	{CharisSIL-R.ttf}
\setsansfont[Path = ../fonts/]{Ubuntu-R.ttf}
\setmonofont[Path = ../fonts/]{UbuntuMono-R.ttf}

%%% XeTeX fix
\newfontfamily{\cyrillicfont}{CharisSIL-R.ttf}[Path = ../fonts/,
	BoldFont = CharisSIL-B.ttf,
  	ItalicFont = CharisSIL-I.ttf,
  	BoldItalicFont = CharisSIL-BI.ttf]

%%% Семейства шрифтов %%%
\newfontfamily\footfont{Ubuntu-R.ttf}[Path = ../fonts/]
\newfontfamily\titlefont{Ubuntu-R.ttf}[Path = ../fonts/, FakeBold = 1.5]
\newfontfamily\authorfont{Ubuntu-R.ttf}[Path = ../fonts/]
\newfontfamily\lstfont{Ubuntu-R.ttf}[Path = ../fonts/]

%%% Графика %%%
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{positioning,arrows}

%%% Тексты программ %%%
\usepackage{listings}
\lstset{
  basicstyle={\small\lstfont},
  breaklines=true,
  language={[Sharp]C},
  numbers=left,
  numberstyle={\scriptsize},
  showstringspaces=false,
  tabsize=4,
  escapeinside={\%*}{*)}            % if you want to add LaTeX within your code
}
\lstset{morekeywords={var}}

%%% Геометрия страницы %%%
\usepackage[
  twoside,
  driver=xetex,
  a5paper,
  includefoot,
  headsep=0mm,
  tmargin=1.5cm,
  bmargin=1.5cm,
  lmargin=1.5cm,
  rmargin=1.5cm
]{geometry}

%%% Списки %%%
\newenvironment{itemize*}%
               {\begin{itemize}%
                   \setlength{\itemsep}{1pt}%
                   \setlength{\parskip}{1pt}}%
               {\end{itemize}}

%%% Колонтитулы %%%
\usepackage{fancyhdr}

\fancypagestyle{fancystyle}{
  \fancyhf{}
  \fancyfoot[LE]{
    \footfont\textbf{\thepage}~|~\nouppercase{\leftmark{}}%
  }
  \fancyfoot[RO]{
    \footfont \nouppercase{\leftmark{}}~|~\textbf{\thepage}
  }
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0.4pt}
}

\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\footfont\textbf{\thepage}}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0.4pt}
}

%%% Настройки PDF %%%
\usepackage[
  unicode=true,
  bookmarks=true,
  bookmarksnumbered=false,
  bookmarksopen=false,
  breaklinks=false,
  pdfborder={0 0 0},
  backref=false,
  colorlinks=false
]{hyperref}
\hypersetup{
  pdftitle={\Title},
  pdfauthor={\Author}
}
\urlstyle{same}

%%% Локализация %%%
\usepackage{xunicode}
\usepackage{polyglossia}
\setdefaultlanguage[spelling=modern]{russian}
\setotherlanguage{english}

%%% Прочее %%%
\usepackage{indentfirst}
%\usepackage[russian]{varioref}
\usepackage{mathtext}
\usepackage[normalem]{ulem}     % ???
\usepackage{stmaryrd}           % ???
\usepackage{calc}
\usepackage{fancyvrb}
\usepackage{rotating}
\usepackage{bytefield}          % Рисование карт памяти
\usepackage{epigraph}           % Эпиграфы
\usepackage{lastpage}
\usepackage{cancel}
\usepackage{xfrac}              % Диагональные дроби
\usepackage{framed}
\usepackage{textcomp}           % Дополнительные символы

\usepackage{totcount}			% Отображение значения счётчика в начале документа

%%% Индекс %%%
\usepackage{makeidx}
\makeindex

%%% Библиография
\bibliographystyle{ugost2008s}

%%% Нумерация разделов %%%
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
%\usepackage{titlesec}
%\titleformat*{\subsection}
%             {\normalfont\normalsize\bfseries\lstfont}
%\titlespacing*{\subsection}
%              {\parindent}
%              {0.3em}
%              {0.3em}

%%% Точки после номера в подписях таблиц и рисунков
\usepackage{ccaption}
\captiondelim{. }
